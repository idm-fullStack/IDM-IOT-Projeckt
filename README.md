Вариант 3 гибрид 
Техническое задание (ТЗ)
Пропускная система контроля доступа с использованием базы данных, камеры и отпечатка пальца на базе ESP32 
________________________________________
1. Введение
Разработать пропускную систему контроля доступа для авторизованных пользователей (например, сотрудников организации), интегрирующую биометрическую аутентификацию по отпечатку пальца и распознавание лица с помощью камеры. Система должна использовать базу данных для хранения профилей пользователей, логов доступа и настроек. Микроконтроллер ESP32 будет обрабатывать данные локально, с синхронизацией с внешней базой данных для масштабируемости и удалённого мониторинга. Система обеспечит безопасный вход/выход в помещения или зоны, с возможностью интеграции с замками, сигнализацией и сервером.
________________________________________
2. Цели и задачи
•	Реализовать многофакторную аутентификацию: отпечаток пальца + распознавание лица для максимальной безопасности.
•	Интегрировать базу данных для централизованного хранения и управления данными пользователей (профили, логи, права доступа).
•	Обеспечить контроль доступа: разрешение/запрет входа на основе верификации, с логированием событий.
•	Поддерживать работу в автономном режиме (локально) и с синхронизацией с сервером.
•	Предоставить интерфейс для администраторов (например, через веб-приложение) для управления пользователями и просмотра логов.
•	Обеспечить высокую точность и защиту от несанкционированного доступа.
________________________________________
3. Требования к системе
3.1 Аппаратные компоненты
•	Микроконтроллер: ESP32 (с Wi-Fi и Bluetooth для коммуникации с БД и сервером).
•	Сканер отпечатков пальцев: Модуль AS608/R307 (UART/I2C) для захвата и верификации отпечатков.
•	Камера: OV2640 или аналогичная (интегрированная с ESP32-CAM) для захвата изображений лица в реальном времени.
•	Дисплей: OLED/LCD для отображения статуса (например, "Вход разрешён", имя пользователя, время).
•	Источник питания: Аккумулятор LiPo 3.7V или внешний 5V блок с низким потреблением.
•	Дополнительно: Реле/соленоид для управления замком двери, RFID-ридер (опционально для дополнительной аутентификации), светодиоды/зуммер для индикации, кнопки для ручного режима.
•	Сервер/БД: Внешний сервер (например, Raspberry Pi или облако) для хостинга базы данных.
3.2 Программные компоненты
•	ОС: FreeRTOS (ESP-IDF) для многозадачности.
•	База данных: Локальная (SQLite на ESP32 для автономного режима) и внешняя (MySQL/PostgreSQL на сервере или облачная, например, Firebase Realtime Database) для хранения:
o	Профилей пользователей (ID, отпечатки, изображения лиц, права доступа).
o	Логов доступа (время, статус, пользователь).
o	Настроек системы (пороги точности, правила доступа).
•	Используемые библиотеки:
o	ESP-IDF/Arduino для ESP32.
o	Adafruit Fingerprint Library для сканера.
o	TensorFlow Lite Micro для распознавания лиц (модель FaceNet или Eigenfaces).
o	Библиотеки для камеры, дисплея, Wi-Fi (MQTT/HTTP для связи с сервером).
•	Интерфейс:
o	Локальный: Дисплей и кнопки.
o	Удалённый: Веб-приложение (на сервере, например, с Node.js + Express) для администрирования (добавление пользователей, просмотр логов).
3.3 Функциональные требования
•	Регистрация пользователей: Захват отпечатка и изображения лица, сохранение в БД (локально и на сервере). Администратор может назначать права доступа (например, "только вход" или "вход/выход").
•	Аутентификация:
o	Сканирование отпечатка и сравнение с БД.
o	Захват лица и распознавание (с учётом освещения и углов).
o	Доступ разрешается при совпадении обоих факторов (или одного в упрощённом режиме).
o	Интеграция с замком: Открытие/закрытие по результату.
•	Логирование: Запись событий в БД (успешные/неудачные попытки, время, пользователь).
•	Синхронизация: Автоматическая передача данных на сервер по Wi-Fi; оффлайн-режим с последующей синхронизацией.
•	Обновление: OTA для прошивки и моделей распознавания.
•	Безопасность: Защита БД (шифрование, аутентификация), ливинг-детекция для отпечатков.
3.4 Нефункциональные требования
•	Точность: FAR < 0.1%, FRR < 5%, точность распознавания лица > 85%.
•	Время отклика: Аутентификация < 3 секунд, синхронизация с БД < 5 секунд.
•	Энергопотребление: Работа от аккумулятора 48 часов в режиме ожидания.
•	Безопасность: Шифрование данных (AES), защита от SQL-инъекций, физическая защита устройства.
•	Масштабируемость: Поддержка до 1000 пользователей в БД.
•	Надёжность: Стабильная работа в различных условиях (темнота, шум).
________________________________________
4. Этапы разработки
1.	Проектирование архитектуры БД и сервера (схема таблиц для пользователей и логов).
2.	Интеграция аппаратных компонентов (сканер, камера, дисплей).
3.	Разработка ПО для захвата и верификации отпечатков/лиц.
4.	Реализация взаимодействия с БД (локально и удалённо).
5.	Создание системы логирования и контроля доступа (интеграция с замком).
6.	Разработка веб-интерфейса для администрирования.
7.	Тестирование (точность, безопасность, производительность).
8.	Документация и инструкции по развёртыванию.
________________________________________
5. Критерии приёмки
•	Система успешно регистрирует и верифицирует пользователей с заданной точностью, с корректным логированием в БД.
•	Доступ контролируется по отпечатку и лицу, с синхронизацией данных.
•	Веб-интерфейс позволяет управлять пользователями и просматривать логи.
•	Устройство работает автономно и в сети, с соблюдением требований по безопасности и производительности.
•	Все компоненты протестированы на стабильность.
